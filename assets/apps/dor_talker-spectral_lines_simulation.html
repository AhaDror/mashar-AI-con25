
<!DOCTYPE html>

<html dir="rtl" lang="he">
<head>
<meta charset="utf-8"/>
<title>×¡×™××•×œ×¦×™×™×ª ×¡×¤×§×˜×¨×•× ×‘×œ×™×¢×” ×•×¤×œ×™×˜×”</title>
<style>body {
      font-family: sans-serif;
      direction: rtl;
      text-align: center;
      background-color: #e6f0ff;
      background-image: url('https://upload.wikimedia.org/wikipedia/commons/d/d6/Hydrogen_atom.svg');
      background-repeat: no-repeat;
      background-position: top left;
      background-size: 150px auto;
      padding: 20px;}
select, button, input {
      margin: 10px;
      padding: 8px;
      font-size: 16px;}
.spectrum {
      position: relative;
      height: 100px;
      margin: 20px auto;
      width: 1100px;
      border: 1px solid #333;}
.spectrum.absorption {
      background: linear-gradient(to right, violet, indigo, blue, green, yellow, orange, red);}
.spectrum.emission {
      background: #000;}
.line {
      position: absolute;
      top: 0;
      bottom: 20px;
      width: 2px;}
.line.absorption {
      background: black;}
.line.emission {
      background: white;}
.label {
      position: absolute;
      bottom: 0;
      font-size: 12px;
      color: white;}
.gas-label {
      font-weight: bold;
      margin-top: 10px;}
.edge-label {
  position: absolute;
  bottom: -20px;
  font-size: 14px;
  color: white;}
.edge-label.left {
  left: 0;}
.edge-label.right {
  right: 0;}
.spectrum-wrapper {
  position: relative;}
.color-band {
    position: absolute;
    height: 100%;
    top: 0;
    left: 0;
    background: linear-gradient(to right, violet, indigo, blue, green, yellow, orange, red);
    background-repeat: no-repeat;
    background-size: contain;
    z-index: 0;
    transition: all 0.3s ease;
}
.color-band {
    display: none !important;
}
.color-band-svg {
    transition: all 0.3s ease;
}

.color-band-stretchable {
    position: absolute;
    height: 100%;
    top: 0;
    left: 0;
    width: 100%;
    background: linear-gradient(to right, violet, indigo, blue, green, yellow, orange, red);
    background-repeat: no-repeat;
    background-size: 100% 100%;
    transform-origin: left center;
    z-index: 0;
    transition: transform 0.3s ease;
}

/* Enhanced visuals for spectrum lines and layout */
.spectrum-container {
    border: 1px solid #aaa;
    margin-bottom: 25px;
    background-color: #000;
    position: relative;
    padding-top: 10px;
}
.emission-line {
    background-color: rgba(0, 255, 0, 0.9);
    width: 2px;
    border-radius: 2px;
    z-index: 1;
}
.absorption-line {
    background-color: rgba(255, 0, 0, 0.9);
    width: 2px;
    border-radius: 2px;
    z-index: 1;
}
.color-band-stretchable {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background: linear-gradient(to right, violet, indigo, blue, green, yellow, orange, red);
    background-size: 100% 100%;
    background-repeat: no-repeat;
    z-index: 0;
    transform-origin: left center;
    transition: transform 0.3s ease;
}
.spectrum-label {
    position: absolute;
    bottom: 0;
    font-size: 13px;
    color: white;
}
.zoom-button, .quiz-button {
    background-color: #333;
    color: #fff;
    padding: 6px 12px;
    border-radius: 6px;
    border: none;
    margin: 5px;
    cursor: pointer;
}
.zoom-button:hover, .quiz-button:hover {
    background-color: #555;
}
.question-box {
    background-color: #1e1e1e;
    color: #eee;
    padding: 12px;
    border-radius: 8px;
    margin-top: 10px;
}
input[type="number"] {
    padding: 6px;
    font-size: 14px;
    border-radius: 4px;
    border: 1px solid #888;
    background-color: #fafafa;
}
</style>
</head>
<body>
<h1>×¡×™××•×œ×¦×™×”: ×¡×¤×§×˜×¨×•× ×¤×œ×™×˜×” ×•×‘×œ×™×¢×” ×©×œ ×’×–×™×</h1>
<div>
<select id="gasSelect" onchange="">
<option value="h">××™××Ÿ</option>
<option value="he">×”×œ×™×•×</option>
<option value="ne">× ×™××•×Ÿ</option>
<option value="o">×—××¦×Ÿ</option>
<option value="n">×—× ×§×Ÿ</option>
<option value="ar">××¨×’×•×Ÿ</option>
<option value="kr">×§×¨×™×¤×˜×•×Ÿ</option>
<option value="xe">×§×¡× ×•×Ÿ</option>
<option value="ch4">××ª××Ÿ</option>
<option value="co2">×¤×—××Ÿ ×“×•-×—××¦× ×™</option>
</select><div id="gasExplanation" style="margin-top: 8px; font-size: 1em; color: black; background-color: #f2f2f2; padding: 5px; border-radius: 6px; max-width: 480px;"></div>
<select id="modeSelect">
<option value="absorption">××¦×‘ ×ª×¦×•×’×”: ×‘×œ×™×¢×”</option>
<option value="emission">××¦×‘ ×ª×¦×•×’×”: ×¤×œ×™×˜×”</option>
</select>
<button onclick="applySelection()">×”×—×œ</button>
</div>
<label>×˜×•×•×— ×¡×¤×§×˜×¨×•×:
<select id="spectrumRange" onchange="applySelection()">
<option value="visible">××•×¨ × ×¨××” (400â€“700 × ×´×)</option>
<option value="uv">××•×œ×˜×¨×” ×¡×’×•×œ (200â€“400 × ×´×)</option>
<option value="ir">××™× ×¤×¨×” ××“×•× (700â€“1100 × ×´×)</option>
</select>
</label>
<div class="gas-label" id="primaryLabel"></div>
<div id="freqDisplay" style="margin-top: 0px; font-size: 18px; font-weight: bold;"></div>
<script>
    const c = 299792458; // ××”×™×¨×•×ª ×”××•×¨ ×‘××˜×¨/×©× ×™×™×”

    const emissionLines = {
      h: [656.3, 486.1, 434.0, 410.2, 397.0],
      he: [447.1, 468.6, 471.3, 492.2, 501.6, 504.8, 587.6, 667.8],
      ne: [540.1, 585.2, 640.2, 659.9, 703.2],
      o: [615.3, 630.0, 690.8],
      n: [500.5, 567.6, 594.5],
      ar: [696.5, 706.7, 738.4],
      kr: [760.2, 768.5, 794.8],
      xe: [823.2, 828.0, 881.9],
      ch4: [430.4, 480.2, 620.7],
      co2: [426.7, 467.8, 636.1],
      unknown: [486.1, 434.0, 656.3]
    };

    const absorptionLines = {
      h: [656.3, 486.1, 434.0, 410.2],
      he: [447.1, 468.6, 501.6, 587.6],
      ne: [540.1, 585.2, 640.2],
      o: [615.3, 630.0, 690.8],
      n: [500.5, 567.6],
      ar: [706.7, 738.4],
      kr: [760.2, 768.5],
      xe: [823.2, 881.9],
      ch4: [430.4, 480.2, 620.7],
      co2: [426.7, 467.8, 636.1],
      unknown: [486.1, 434.0, 656.3]
    };

    function applySelection() {
      const gas = document.getElementById('gasSelect').value;
      const mode = document.getElementById("modeSelect").value;
      renderLines('spectrumPrimary', gas, mode, 'primaryLabel', 1, 550);
    }

    function activateTest() {
      document.getElementById('gasSelect').value = 'unknown';
      applySelection();
    }

    function addComparison() {
      const gas = document.getElementById("compareGasSelect").value;
      if (gas) {
        const mode = document.getElementById("compareModeSelect").value;
        const id = 'spectrum_' + gas + '_' + Date.now();
        const label = document.createElement('div');
        label.className = 'gas-label';
        label.innerText = "×’×– × ×‘×—×¨: " + gas;
        const spectrum = document.createElement('div');
        spectrum.className = 'spectrum ' + mode;
        spectrum.id = id;
        const wrapper = document.createElement('div');
        const removeBtn = document.createElement("button");
        removeBtn.innerText = "×”×¡×¨ ×¡×¨×’×œ";
        removeBtn.onclick = () => wrapper.remove();
        wrapper.appendChild(label);
        const centerLabel = document.createElement("label");
        centerLabel.innerHTML = '××¨×›×– ×–×•×: <select onchange="updateSingleComparison(\'' + id + '\', this.value)">' +
        '<option value="500">500</option><option value="600">600</option><option value="700">700</option></select>';
        const zoomLabel = document.createElement("label");
        zoomLabel.innerHTML = '×–×•×: <input type="range" min="1" max="5" step="0.5" value="1" onchange="updateZoomForComparison(\'' + id + '\', this.value)"> ';
        wrapper.appendChild(centerLabel);
        wrapper.appendChild(zoomLabel);
        wrapper.appendChild(removeBtn);
        spectrum.setAttribute("data-center", "600");
        wrapper.appendChild(spectrum);
        const parent = document.getElementById("spectrumPrimary").parentNode;
        parent.appendChild(wrapper);
        renderLines(id, gas, mode, null, 1, 600);
      } else {
        alert("×©× ×’×– ×œ× ××•×›×¨.");
      }
    }

    function mapGasName(name) {
      const map = {
        '××™××Ÿ': 'h', '×”×œ×™×•×': 'he', '× ×™××•×Ÿ': 'ne', '×—××¦×Ÿ': 'o', '×—× ×§×Ÿ': 'n',
        '××¨×’×•×Ÿ': 'ar', '×§×¨×™×¤×˜×•×Ÿ': 'kr', '×§×¡× ×•×Ÿ': 'xe', '××ª××Ÿ': 'ch4',
        '×¤×—××Ÿ ×“×•-×—××¦× ×™': 'co2', '×’×– ×× ×•× ×™××™': 'unknown'
      };
      return map[name] || null;
    }

    function renderLines(containerId, gas, mode, labelId = null, customZoom = null) {
      const container = document.getElementById(containerId);
      container.className = 'spectrum ' + mode;
      container.innerHTML = '';
      if (labelId) {
        document.getElementById(labelId).innerText = "×’×– × ×‘×—×¨: " + gas;
      }

      const zoom = customZoom !== null ? customZoom : parseFloat(document.getElementById("zoomSlider").value);
      const containerElem = document.getElementById(containerId);
      if (customCenter !== null) containerElem.setAttribute("data-center", customCenter);
      const center = parseInt(document.getElementById("zoomCenter").value);
      
      let minWave, maxWave;
      const range = document.getElementById("spectrumRange")?.value || "visible";
      if (range === "visible") {
        minWave = 400;
        maxWave = 700;
      } else if (range === "uv") {
        minWave = 200;
        maxWave = 400;
      } else if (range === "ir") {
        minWave = 700;
        maxWave = 1100;
      }

      const lines = mode === 'absorption' ? absorptionLines : emissionLines;
      const className = 'line ' + mode;
      const labelClass = 'label';

      lines[gas].forEach(wavelength => {
        if (wavelength >= 100 && wavelength <= 1100) {
          const left = ((wavelength - minWave) / (maxWave - minWave)) * 100;
          if (left >= 0 && left <= 100) {
            const line = document.createElement('div');
            line.className = className;
            line.style.left = left + '%';
            line.onclick = () => {
              const freq = c / (wavelength * 1e-9);
              document.getElementById("freqDisplay").innerText = "×ª×“×™×¨×•×ª: " + formatUnits(freq);
            };
            container.appendChild(line);

            const label = document.createElement('div');
            label.className = labelClass;
            label.style.left = `calc(${left}% - 15px)`;
            label.innerText = wavelength.toFixed(1);
            container.appendChild(label);
          }
        }
      });
    }

    function formatUnits(freq) {
      if (freq >= 1e12) return (freq / 1e12).toFixed(2) + ' ×˜×¨×” ×”×¨×¥';
      if (freq >= 1e9) return (freq / 1e9).toFixed(2) + ' ×’×™×’×” ×”×¨×¥';
      if (freq >= 1e6) return (freq / 1e6).toFixed(2) + ' ××’×” ×”×¨×¥';
      return freq.toFixed(2) + ' ×”×¨×¥';
    }

    window.onload = applySelection;
  
    function updateAllComparisons() {
      const zoom = parseFloat(document.getElementById("compareZoomSlider").value);
      const mode = document.getElementById("compareModeSelect").value;
      const allSpectra = document.querySelectorAll("#comparisonContainer .spectrum");
      allSpectra.forEach(spectrum => {
        const gasId = spectrum.id.split("_")[1]; const center = parseInt(spectrum.getAttribute("data-center") || 600);
        renderLines(spectrum.id, gasId, mode, null, zoom, center);
      });
    }

    function updateSingleComparison(id, center) {
      const zoom = parseFloat(document.getElementById("compareZoomSlider").value);
      const mode = document.getElementById("compareModeSelect").value;
      const gasId = id.split("_")[1];
      renderLines(id, gasId, mode, null, zoom, parseInt(center));
    }

    function renderLines(containerId, gas, mode, labelId = null, customZoom = null, customCenter = null) {
      const container = document.getElementById(containerId);
      container.className = 'spectrum ' + mode;
      container.innerHTML = '';
      if (labelId) {
        document.getElementById(labelId).innerText = "×’×– × ×‘×—×¨: " + gas;
      }

      const zoom = customZoom !== null ? customZoom : parseFloat(document.getElementById("zoomSlider").value);
      const containerElem = document.getElementById(containerId);
      if (customCenter !== null) containerElem.setAttribute("data-center", customCenter);
      const center = customCenter !== null ? customCenter : parseInt(document.getElementById("zoomCenter").value);
      
      let minWave, maxWave;
      const range = document.getElementById("spectrumRange")?.value || "visible";
      if (range === "visible") {
        minWave = 400;
        maxWave = 700;
      } else if (range === "uv") {
        minWave = 200;
        maxWave = 400;
      } else if (range === "ir") {
        minWave = 700;
        maxWave = 1100;
      }

      const lines = mode === 'absorption' ? absorptionLines : emissionLines;
      const className = 'line ' + mode;
      const labelClass = 'label';

      lines[gas].forEach(wavelength => {
        if (wavelength >= 100 && wavelength <= 1100) {
          const left = ((wavelength - minWave) / (maxWave - minWave)) * 100;
          if (left >= 0 && left <= 100) {
            const line = document.createElement('div');
            line.className = className;
            line.style.left = left + '%';
            line.onclick = () => {
              const freq = c / (wavelength * 1e-9);
              document.getElementById("freqDisplay").innerText = "×ª×“×™×¨×•×ª: " + formatUnits(freq);
            };
            container.appendChild(line);

            const label = document.createElement('div');
            label.className = labelClass;
            label.style.left = `calc(${left}% - 15px)`;
            label.innerText = wavelength.toFixed(1);
            container.appendChild(label);
          }
        }
      });
    }

    function updateZoomForComparison(id, zoomVal) {
      const spectrum = document.getElementById(id);
      const center = spectrum.dataset.center ? parseInt(spectrum.dataset.center) : 600;
      spectrum.dataset.zoom = zoomVal;
      const gasId = id.split("_")[1];
      const mode = document.getElementById("compareModeSelect").value;
      renderLines(id, gasId, mode, null, parseFloat(zoomVal), center);
    }

    window.addEventListener("DOMContentLoaded", () => {
        applySelection();
    });
    </script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const gasSelect = document.getElementById('gasSelect');
    const gasLabel = document.getElementById('primaryLabel');
    const modeSelect = document.getElementById('modeSelect');
    const zoomSlider = document.getElementById('zoomSlider');
    const zoomCenter = document.getElementById('zoomCenter');

    document.querySelectorAll('button').forEach(btn => {
      if (btn.textContent.includes('×¤×¢×œ ××¦×‘ ×‘×•×—×Ÿ')) {
        btn.addEventListener('click', function () {
            const gases = Array.from(gasSelect.options).filter(opt => opt.value && opt.value !== 'anonymous');
            const random = gases[Math.floor(Math.random() * gases.length)];
            const gas = random.value;
            const mode = modeSelect.value;
            const zoom = parseFloat(zoomSlider.value);
            const center = parseInt(zoomCenter.value);
            renderLines('spectrumPrimary', gas, mode, 'primaryLabel', zoom, center);
            gasLabel.textContent = ""; // Hide label
        });
      }
    });

    gasSelect.addEventListener('change', function () {
        gasLabel.style.visibility = 'visible';
        gasLabel.textContent = "×’×– × ×‘×—×¨: " + gasSelect.value;
    });
});
</script>
<script>
function drawAbsorptionLines(canvas, wavelengths) {
    const ctx = canvas.getContext('2d');
    ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
    wavelengths.forEach(wl => {
        const x = (wl - 350) / (900 - 350) * canvas.width;
        ctx.fillRect(x, 0, 2, canvas.height);
    });
}

function drawEmissionLines(canvas, wavelengths) {
    const ctx = canvas.getContext('2d');
    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
    wavelengths.forEach(wl => {
        const x = (wl - 350) / (900 - 350) * canvas.width;
        ctx.fillRect(x, 0, 2, canvas.height);
    });
}

function drawEdgeLabels(canvas, start, end) {
    const ctx = canvas.getContext('2d');
    ctx.fillStyle = 'white';
    ctx.font = '12px Arial';
    ctx.fillText(start + " × "×", 5, canvas.height - 5);
    const textWidth = ctx.measureText(end + " × "×").width;
    ctx.fillText(end + " × "×", canvas.width - textWidth - 5, canvas.height - 5);
}
</script>
<script>
const gasExplanations = {
  hydrogen: "",
  helium: "",
  oxygen: "×§×•×•×™ ×‘×œ×™×¢×” ×‘×•×œ×˜×™× ×‘×ª×—×•× ×”××“×•×-×›×—×•×œ ×¢×§×‘ ××¢×‘×¨×™× ××œ×§×˜×¨×•× ×™×™×",
  methane: "×‘×¢×œ ×§×•×•×™× ×‘×ª×—×•× ×”××™× ×¤×¨×”-××“×•× ×¢×§×‘ ×¨×˜×˜ ×”××•×œ×§×•×œ×”",
  neon: "×¤×œ×™×˜×” ×—×–×§×” ×‘×ª×—×•× ×”××“×•×-×›×ª×•× ×‘×ª× ××™ ×¤×¨×™×§×” ×—×©××œ×™×ª",
  argon: "×¡×¤×§×˜×¨×•× ×‘×œ×™×¢×” ××¦×•×™ ×‘×ª×—×•× ×”×›×—×•×œ-×¡×’×•×œ ×‘×©×œ ××‘× ×” ×”××œ×§×˜×¨×•× ×™×",
  krypton: "×¤×œ×™×˜×•×ª ×—×œ×©×•×ª ×‘××•×œ×˜×¨×”-×¡×’×•×œ ×•×›×—×•×œ",
  xenon: "×¡×¤×§×˜×¨×•× ×‘×œ×™×¢×” ×¨×—×‘ ×‘×ª×—×•× ×”× ×¨××”",
  nitrogen: "×§×•×•×™× ×‘×ª×—×•××™× ××’×•×•× ×™× ×¢×§×‘ ××‘× ×” ××•×¨×›×‘",
  co2: "×¤×œ×™×˜×” ×‘×ª×—×•× ×”××™× ×¤×¨×”-××“×•× ×‘×©×œ ×¨×˜×˜ ××ª×•×—×›×"
};

const gasCodeToName = {
  h: "hydrogen",
  he: "helium",
  ne: "neon",
  o: "oxygen",
  n: "nitrogen",
  ar: "argon",
  kr: "krypton",
  xe: "xenon",
  ch4: "methane",
  co2: "co2"
};



window.addEventListener("load", function() {
  
  
});
</script>
<div id="spectrumExportZone"><div style="display: flex; flex-direction: row-reverse; justify-content: center; align-items: flex-start; gap: 0px; margin: 0; padding: 0;"><div class="spectrum emission" id="lymanSpectrum" style="width: 275px; height: 100px; background-color: #f5e6ff; display: none; margin: 0; padding: 0;"></div><div class="spectrum" id="spectrumPrimary" style="margin: 0; padding: 0;"></div></div></div><button onclick="exportSpectrumAsImage()" style="display:block; margin: 15px auto;">ğŸ“· ×©××•×¨ ××ª ×”×¡×¤×§×˜×¨×•× ×›×ª××•× ×”</button><div id="bankedQuizSection" style="margin-top: 40px; padding: 15px; border-top: 2px solid #aaa;">
<h3>×©××œ×ª ×‘×•×—×Ÿ ××¡×¤×¨×™×ª</h3>
<button onclick="loadBankedQuestion()">×”×¤×¢×œ ×©××œ×”</button>
<div id="bankedQuestion" style="margin-top: 10px;"></div>
<div id="bankedAnswerResult" style="margin-top: 10px;"></div>
</div>
<script>
window.onload = function() {
  const quizBank = [
    {
      question: "××”×• ××•×¨×š ×”×’×œ ×©×œ ×”×§×• ×”××¨×›×–×™ ×‘×¡×¤×§×˜×¨×•× ×”×¤×œ×™×˜×” ×©×œ ××™××Ÿ? (× × ×•××˜×¨)",
      answer: "656.3",
      type: "number"
    },
    {
      question: "××”×™ ×”×ª×“×™×¨×•×ª ×©×œ ×’×œ ×©××•×¨×›×• 500 × × ×•××˜×¨? (×‘×¤×•×¨××˜ ×›××• 6e14)",
      answer: "6e14",
      type: "text"
    },
    {
      question: "××”×• ××•×¨×š ×”×’×œ ×©×œ ×§×• ×‘×œ×™×¢×” ××•×¤×™×™× ×™ ×‘×’×– × ×™××•×Ÿ? (× × ×•××˜×¨)",
      answer: "585.2",
      type: "number"
    },
    {
      question: "××™×–×” ××•×¨×š ×’×œ × ××¦× ×§×¨×•×‘ ×™×•×ª×¨ ×œ×¡×¤×§×˜×¨×•× ×”××•×œ×˜×¨×” ×¡×’×•×œ â€” 400 ××• 700?",
      answer: "400",
      type: "number"
    },
    {
      question: "××™×–×” ×’×– ×™×•×¦×¨ ×§×• ×¤×œ×™×˜×” ×‘××•×¨×š ×’×œ ×©×œ ×›-656.3 × \"×?",
      answer: "××™××Ÿ",
      type: "text"
    }
  ,

    {
      question: "×›××” ×§×•×•×™× ×¢×™×§×¨×™×™× ×§×™×™××™× ×‘×¡×¤×§×˜×¨×•× ×”×¤×œ×™×˜×” ×©×œ ×”×œ×™×•×?",
      answer: "8",
      type: "number"
    },
    {
      question: "××™×–×• ×ª×•×¤×¢×” ×™×•×¦×¨×ª ×§×•×•×™ ×‘×œ×™×¢×” ×‘×’×–?",
      answer: "××¢×‘×¨ ××œ×§×˜×¨×•×Ÿ ×œ×¨××ª ×× ×¨×’×™×” ×’×‘×•×”×”",
      type: "text"
    },
    {
      question: "××”×• ××•×¨×š ×’×œ ××•×¤×™×™× ×™ ×œ×§×• ×¤×œ×™×˜×” ×‘××¨×’×•×Ÿ?",
      answer: "706.7",
      type: "number"
    },
    {
      question: "××™×–×” ×’×– ×™×•×¦×¨ ×§×•×•×™ ×‘×œ×™×¢×” ×‘××–×•×¨ ×”-430 × \"×?",
      answer: "××ª××Ÿ",
      type: "text"
    },
    {
      question: "××™×–×• ×™×—×™×“×ª ××™×“×” ××ª××™××” ×œ××•×¨×š ×’×œ?",
      answer: "× × ×•××˜×¨",
      type: "text"
    }
];

  window.loadBankedQuestion = function() {
    const rand = Math.floor(Math.random() * quizBank.length);
    const q = quizBank[rand];
    const inputType = q.type === "number" ? "number" : "text";
    const html = `
      <p>${q.question}</p>
      <input type="${inputType}" id="bankedInput" style="padding:5px;" />
      <button onclick="checkBankedAnswer('${q.answer}')">×‘×“×•×§</button>
    `;
    document.getElementById("bankedQuestion").innerHTML = html;
    document.getElementById("bankedAnswerResult").innerHTML = "";
  };

  


window.checkBankedAnswer = function(correctAnswer) {
  const input = document.getElementById("bankedInput");
  const value = input.value.trim();
  const isCorrect = value === correctAnswer;

  input.style.backgroundColor = isCorrect ? "#c8f7c5" : "#f7c5c5";

  const feedback = document.getElementById("bankedAnswerResult");
  if (feedback) {
    feedback.innerHTML = isCorrect
      ? "âœ”ï¸ <strong>× ×›×•×Ÿ!</strong>"
      : "âŒ <strong>×œ× × ×›×•×Ÿ.</strong> ×”×ª×©×•×‘×” ×”× ×›×•× ×” ×”×™×: <code>" + correctAnswer + "</code>";
  }

  if (isCorrect) quizScore++;
  const scoreElem = document.getElementById("quizScore");
  if (scoreElem) scoreElem.innerText = "× ×™×§×•×“: " + quizScore;
};



};
</script>
<script>
let quizScore = 0;

document.addEventListener("DOMContentLoaded", function () {
    function updateColorBandZoom(container, zoom) {
        const band = container.querySelector(".color-band-stretchable");
        if (band) {
            band.style.transform = `scaleX(${zoom})`;
        }
    }

    function updateLineZoom(container, zoom) {
        const lines = container.querySelectorAll(".emission-line, .absorption-line");
        lines.forEach(line => {
            const originalLeft = parseFloat(line.dataset.originalLeft || line.style.left || 0);
            if (!line.dataset.originalLeft) {
                line.dataset.originalLeft = originalLeft;
            }
            line.style.left = (originalLeft * zoom) + "px";
            line.style.width = "2px";
        });
    }

    window.applyZoomFix = function (zoomFactor) {
        const allSpectra = document.querySelectorAll(".spectrum-container");
        allSpectra.forEach(container => {
            updateColorBandZoom(container, zoomFactor);
            updateLineZoom(container, zoomFactor);
        });
    };

    setTimeout(() => {
        const allSpectra = document.querySelectorAll(".spectrum-container");
        allSpectra.forEach(container => {
            updateColorBandZoom(container, 1);
            updateLineZoom(container, 1);
        });
    }, 500);
});
</script>
<script>
let quizScore = 0;

document.addEventListener("DOMContentLoaded", function () {
    function updateZoomElements(container, zoom) {
        const band = container.querySelector(".color-band-stretchable");
        if (band) {
            band.style.transform = `scaleX(${zoom})`;
        }

        const lines = container.querySelectorAll(".emission-line, .absorption-line");
        lines.forEach(line => {
            const originalLeft = parseFloat(line.dataset.originalLeft || line.style.left || 0);
            if (!line.dataset.originalLeft) {
                line.dataset.originalLeft = originalLeft;
            }
            line.style.left = (originalLeft * zoom) + "px";
        });
    }

    window.applyZoomFix = function (zoomFactor) {
        const containers = document.querySelectorAll(".spectrum-container");
        containers.forEach(container => updateZoomElements(container, zoomFactor));
    };
});
</script>
<script>
let quizScore = 0;

document.addEventListener("DOMContentLoaded", function () {
  const quizBank = [
  {
    "question": "××”×• ××•×¨×š ×”×’×œ ×©×œ ×”×§×• ×”××¨×›×–×™ ×‘×¡×¤×§×˜×¨×•× ×”×¤×œ×™×˜×” ×©×œ ××™××Ÿ? (× × ×•××˜×¨)",
    "answer": "656.3",
    "type": "number"
  },
  {
    "question": "××”×™ ×”×ª×“×™×¨×•×ª ×©×œ ×’×œ ×©××•×¨×›×• 500 × × ×•××˜×¨? (×‘×¤×•×¨××˜ ×›××• 6e14)",
    "answer": "6e14",
    "type": "text"
  },
  {
    "question": "××”×• ××•×¨×š ×”×’×œ ×©×œ ×§×• ×‘×œ×™×¢×” ××•×¤×™×™× ×™ ×‘×’×– × ×™××•×Ÿ? (× × ×•××˜×¨)",
    "answer": "585.2",
    "type": "number"
  },
  {
    "question": "××™×–×” ××•×¨×š ×’×œ × ××¦× ×§×¨×•×‘ ×™×•×ª×¨ ×œ×¡×¤×§×˜×¨×•× ×”××•×œ×˜×¨×” ×¡×’×•×œ â€” 400 ××• 700?",
    "answer": "400",
    "type": "number"
  },
  {
    "question": "××™×–×” ×’×– ×™×•×¦×¨ ×§×• ×¤×œ×™×˜×” ×‘××•×¨×š ×’×œ ×©×œ ×›-656.3 × \"×?",
    "answer": "××™××Ÿ",
    "type": "text"
  },
  {
    "question": "××”×• ××•×¨×š ×”×’×œ ×©×œ ×§×• ×‘×œ×™×¢×” ××•×¤×™×™× ×™ ×‘×’×– ×—××¦×Ÿ? (× × ×•××˜×¨)",
    "answer": "630.0",
    "type": "number"
  },
  {
    "question": "××™×–×” ×’×– ×™×•×¦×¨ ×§×• ×¤×œ×™×˜×” ×‘××•×¨×š ×’×œ ×©×œ 587.6 × \"×?",
    "answer": "×”×œ×™×•×",
    "type": "text"
  },
  {
    "question": "×›××” ×§×•×•×™ ×¤×œ×™×˜×” ×™×© ×œ××ª××Ÿ ×‘×ª×—×•× ×”× ×¨××”?",
    "answer": "3",
    "type": "number"
  },
  {
    "question": "××™×–×” ××•×¨×š ×’×œ × ×¤×•×¥ ×‘×§×•×•×™ ×‘×œ×™×¢×” ×©×œ ×¤×—××Ÿ ×“×•-×—××¦× ×™?",
    "answer": "467.8",
    "type": "number"
  },
  {
    "question": "××”×• ×¦×‘×¢ ×”××•×¨ ×‘××•×¨×š ×’×œ ×©×œ 486 × \"×?",
    "answer": "×›×—×•×œ",
    "type": "text"
  },
  {
    "question": "××™×–×• ×™×—×™×“×” ××•×“×“×ª ×ª×“×™×¨×•×ª?",
    "answer": "×”×¨×¥",
    "type": "text"
  },
  {
    "question": "××™×–×” ×’×– ×™×•×¦×¨ ×§×• ×¤×œ×™×˜×” ×‘××•×¨×š ×’×œ 667.8 × \"×?",
    "answer": "×”×œ×™×•×",
    "type": "text"
  },
  {
    "question": "××”×• ××•×¨×š ×”×’×œ ×©×œ ×§×• ×¤×œ×™×˜×” ×¢×™×§×¨×™ ×‘××¨×’×•×Ÿ?",
    "answer": "706.7",
    "type": "number"
  },
  {
    "question": "×›××” ×§×•×•×™ ×‘×œ×™×¢×” ×™×© ×œ× ×™××•×Ÿ ×‘××¢×¨×›×ª?",
    "answer": "3",
    "type": "number"
  },
  {
    "question": "××” ×§×•×¨×” ×œ××œ×§×˜×¨×•×Ÿ ×©×§×•×œ×˜ ×¤×•×˜×•×Ÿ?",
    "answer": "×¢×•×œ×” ×œ×¨××ª ×× ×¨×’×™×” ×’×‘×•×”×”",
    "type": "text"
  },
  {
    "question": "××” ×©× ×”×ª×•×¤×¢×” ×©×‘×” ××˜×•× ×¤×•×œ×˜ ×¤×•×˜×•×Ÿ?",
    "answer": "×¤×œ×™×˜×”",
    "type": "text"
  },
  {
    "question": "××™×–×” ×¦×‘×¢ ××ª××™× ×œ××•×¨×š ×’×œ ×©×œ 700 × \"×?",
    "answer": "××“×•×",
    "type": "text"
  },
  {
    "question": "××™×–×” ×’×– ××ª××™× ×œ×§×• ×¤×œ×™×˜×” ×‘-823.2 × \"×?",
    "answer": "×§×¡× ×•×Ÿ",
    "type": "text"
  },
  {
    "question": "×›××” ×§×•×•×™ ×¤×œ×™×˜×” ×¢×™×§×¨×™×™× ×™×© ×œ×§×¨×™×¤×˜×•×Ÿ?",
    "answer": "3",
    "type": "number"
  },
  {
    "question": "××”×• ××•×¨×š ×’×œ ×©×œ ×§×• ×‘×œ×™×¢×” ×‘×’×– ×—× ×§×Ÿ?",
    "answer": "500.5",
    "type": "number"
  },
  {
    "question": "××”×• ×¡×“×¨ ×”×¦×‘×¢×™× ×‘×¡×¤×§×˜×¨×•× ×”× ×¨××” ×-380 × \"× ×¢×“ 700 × \"×?",
    "answer": "×¡×’×•×œ ×›×—×•×œ ×™×¨×•×§ ×¦×”×•×‘ ×›×ª×•× ××“×•×",
    "type": "text"
  },
  {
    "question": "××™×–×” ×’×– × ×¤×•×¥ ×‘××•×¨×•×ª × ×™××•×Ÿ?",
    "answer": "× ×™××•×Ÿ",
    "type": "text"
  },
  {
    "question": "××”×• ××•×¨×š ×’×œ ××•×¤×™×™× ×™ ×œ×¤×œ×™×˜×ª ×”×œ×™×•× ×‘×ª×—×•× ×”×›×—×•×œ?",
    "answer": "447.1",
    "type": "number"
  },
  {
    "question": "××”×™ ×”××©××¢×•×ª ×©×œ ×¤×œ×™×˜×ª ××•×¨ ×¢×œ ×™×“×™ ×’×–?",
    "answer": "×™×¨×™×“×ª ××œ×§×˜×¨×•×Ÿ ×œ×¨××ª ×× ×¨×’×™×” × ××•×›×”",
    "type": "text"
  },
  {
    "question": "××™×–×” ×’×– ×™×•×¦×¨ ×§×•×•×™ ×¤×œ×™×˜×” ×‘××•×¨×š ×’×œ ×©×œ 492.2 × \"×?",
    "answer": "×”×œ×™×•×",
    "type": "text"
  },
  {
    "question": "×›××” ×§×•×•×™ ×¤×œ×™×˜×” ×™×© ×œ×—××¦×Ÿ ×‘×¡×¤×§×˜×¨×•× ×”× ×¨××”?",
    "answer": "3",
    "type": "number"
  },
  {
    "question": "××™×–×” ×’×– ××ª××™× ×œ×§×• ×‘×œ×™×¢×” ×‘-823.2 × \"×?",
    "answer": "×§×¡× ×•×Ÿ",
    "type": "text"
  },
  {
    "question": "××”×• ××•×¨×š ×”×’×œ ×©×œ ×§×• ×‘×œ×™×¢×” ×‘××ª××Ÿ?",
    "answer": "480.2",
    "type": "number"
  },
  {
    "question": "××™×–×” ×’×– ×™×•×¦×¨ ×§×• ×‘×œ×™×¢×” ×‘-640.2 × \"×?",
    "answer": "× ×™××•×Ÿ",
    "type": "text"
  },
  {
    "question": "×›××” ×§×•×•×™ ×¤×œ×™×˜×” ×™×© ×œ×¤×—××Ÿ ×“×•-×—××¦× ×™?",
    "answer": "3",
    "type": "number"
  },
  {
    "question": "××”×™ ×× ×¨×’×™×™×ª ×¤×•×˜×•×Ÿ ×©×œ ××•×¨×š ×’×œ 500 × \"×?",
    "answer": "2.48e-19",
    "type": "text"
  },
  {
    "question": "××™×–×” ×’×– ×™×•×¦×¨ ×§×• ×¤×œ×™×˜×” ×‘××–×•×¨ ×”××•×œ×˜×¨×” ×¡×’×•×œ?",
    "answer": "×§×¨×™×¤×˜×•×Ÿ",
    "type": "text"
  },
  {
    "question": "××™×–×• ×ª×•×¤×¢×” × ×¦×¤×™×ª ×›××©×¨ ×¡×¤×§×˜×¨×•× ××›×™×œ ×§×•×•×™× ×›×”×™× ×¢×œ ×¨×§×¢ ×¦×‘×¢×•× ×™?",
    "answer": "×‘×œ×™×¢×”",
    "type": "text"
  },
  {
    "question": "××” ×©× ×”×™×—×™×“×” ×”××ª××™××” ×œ××•×¨×š ×’×œ ×‘×ª×—×•× ×”× ×¨××”?",
    "answer": "× × ×•××˜×¨",
    "type": "text"
  },
  {
    "question": "××” ×”×’×– ×©×™×•×¦×¨ ×§×• ×¤×œ×™×˜×” ×‘-704 × \"×?",
    "answer": "× ×™××•×Ÿ",
    "type": "text"
  },
  {
    "question": "××™×–×” ×’×– ×™×•×¦×¨ ×¤×œ×™×˜×” ×—×–×§×” ×‘××“×•×-×›×ª×•×?",
    "answer": "× ×™××•×Ÿ",
    "type": "text"
  },
  {
    "question": "××”×™ ××”×™×¨×•×ª ×”××•×¨ ×‘××˜×¨ ×œ×©× ×™×™×”?",
    "answer": "299792458",
    "type": "number"
  },
  {
    "question": "××™×–×• ×§×¤×™×¦×” ×× ×¨×’×˜×™×ª ×‘××˜×•× ×™×•×¦×¨×ª ×¤×œ×™×˜×ª ××•×¨?",
    "answer": "××¨××” ×’×‘×•×”×” ×œ× ××•×›×”",
    "type": "text"
  },
  {
    "question": "××™×–×• ××¢×¨×›×ª ×’×–×™× ××¦×™×’×” ×§×•×•×™× ×¡×‘×™×‘ 760 × \"×?",
    "answer": "×§×¨×™×¤×˜×•×Ÿ",
    "type": "text"
  },
  {
    "question": "×›××” ×§×•×•×™× ×™×© ×‘×’×– ×”×œ×™×•× ×‘×˜×•×•×— ×”× ×¨××”?",
    "answer": "8",
    "type": "number"
  },
  {
    "question": "××™×–×• ×™×—×™×“×ª ××™×“×” ××ª××™××” ×œ×ª×“×™×¨×•×ª ××•×¨?",
    "answer": "×”×¨×¥",
    "type": "text"
  },
  {
    "question": "××™×–×” ×’×– ×™×•×¦×¨ ×‘×œ×™×¢×” ×‘-434 × \"×?",
    "answer": "××™××Ÿ",
    "type": "text"
  },
  {
    "question": "××”×• ×ª×—×•× ××•×¨×›×™ ×”×’×œ ×©×œ ××•×¨ × ×¨××”?",
    "answer": "380-700",
    "type": "text"
  },
  {
    "question": "××™×–×• ×ª×•×¤×¢×” ×™×•×¦×¨×ª ×¡×¤×§×˜×¨×•× ×¤×œ×™×˜×” ×‘×“×™×¡×§×¨×˜×™×•×ª?",
    "answer": "××¢×‘×¨×™× ×§×•×•× ×˜×™×™× ×©×œ ××œ×§×˜×¨×•×Ÿ",
    "type": "text"
  },
  {
    "question": "××” ×”××©××¢×•×ª ×©×œ ×¡×¤×§×˜×¨×•× ×¤×œ×™×˜×” ×‘×“×™×“?",
    "answer": "×¤×•×˜×•× ×™× × ×¤×œ×˜×™× ×‘×ª×“×¨×™× ××¡×•×™××™× ×‘×œ×‘×“",
    "type": "text"
  }
];

  window.loadBankedQuestion = function () {
    const rand = Math.floor(Math.random() * quizBank.length);
    const q = quizBank[rand];
    const inputType = q.type === "number" ? "number" : "text";
    const html = `
      <p>${q.question}</p>
      <input type="${inputType}" id="bankedInput" style="padding:5px;" />
      <button onclick="checkBankedAnswer('${q.answer}')">×‘×“×•×§</button>
    `;
    document.getElementById("bankedQuestion").innerHTML = html;
    document.getElementById("bankedAnswerResult").innerHTML = "";
  }

  


window.checkBankedAnswer = function(correctAnswer) {
  const input = document.getElementById("bankedInput");
  const value = input.value.trim();
  const isCorrect = value === correctAnswer;

  input.style.backgroundColor = isCorrect ? "#c8f7c5" : "#f7c5c5";

  const feedback = document.getElementById("bankedAnswerResult");
  if (feedback) {
    feedback.innerHTML = isCorrect
      ? "âœ”ï¸ <strong>× ×›×•×Ÿ!</strong>"
      : "âŒ <strong>×œ× × ×›×•×Ÿ.</strong> ×”×ª×©×•×‘×” ×”× ×›×•× ×” ×”×™×: <code>" + correctAnswer + "</code>";
  }

  if (isCorrect) quizScore++;
  const scoreElem = document.getElementById("quizScore");
  if (scoreElem) scoreElem.innerText = "× ×™×§×•×“: " + quizScore;
};



});
</script>
<script>
function updateSpectrumBackground(containerId, range) {
  const container = document.getElementById(containerId);
  if (!container) return;

  if (range === "uv") {
    container.className = "spectrum";
    container.style.setProperty("background", "#e6ccff", "important");
  } else if (range === "ir") {
    container.className = "spectrum";
    container.style.setProperty("background", "crimson", "important");
  } else {
    container.className = "spectrum emission";
    container.style.setProperty("background", "linear-gradient(to right, violet, indigo, blue, green, yellow, orange, red)", "important");
  }
}

document.addEventListener("DOMContentLoaded", function () {
  const dropdown = document.getElementById("spectrumRange");
  if (dropdown) {
    const initial = dropdown.value;
    updateSpectrumBackground("spectrumPrimary", initial);

    dropdown.addEventListener("change", function () {
      updateSpectrumBackground("spectrumPrimary", this.value);
    });
  }
});
</script>
<div style="display: flex; justify-content: center; align-items: flex-start; gap: 10px; margin-top: 0px;">
<div id="spectrumPrimaryContainer"></div>
<div id="lymanSpectrumWrapper" style="flex-shrink: 0;">
<script>
const lymanSeries = [121.6, 102.6, 97.3, 95.0, 93.8];

function formatUnits(freq) {
  if (freq >= 1e12) return (freq / 1e12).toFixed(2) + ' ×˜×¨×” ×”×¨×¥';
  if (freq >= 1e9) return (freq / 1e9).toFixed(2) + ' ×’×™×’×” ×”×¨×¥';
  if (freq >= 1e6) return (freq / 1e6).toFixed(2) + ' ××’×” ×”×¨×¥';
  return freq.toFixed(2) + ' ×”×¨×¥';
}

function renderLymanSeries(containerId) {
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  container.className = 'spectrum emission';
  const c = 299792458;
  lymanSeries.forEach(wavelength => {
    if (wavelength >= 90 && wavelength <= 200) {
      const left = ((wavelength - 90) / (200 - 90)) * 100;
      const line = document.createElement('div');
      line.className = 'line emission';
      line.style.left = left + '%';
      line.title = wavelength.toFixed(1) + " × ×´×";
      line.onclick = () => {
        const freq = c / (wavelength * 1e-9);
        const display = document.getElementById("freqDisplay");
        if (display) {
          display.innerText = "×ª×“×™×¨×•×ª: " + formatUnits(freq);
        }
      };
      container.appendChild(line);
    }
  });
}

const originalApplySelection = applySelection;
applySelection = function() {
  originalApplySelection();
  const gas = document.getElementById('gasSelect').value;
  const range = document.getElementById('spectrumRange')?.value || "visible";
  const lymanDiv = document.getElementById("lymanSpectrum");
  if (gas === "h" && range === "uv") {
    lymanDiv.style.display = "block";
    renderLymanSeries("lymanSpectrum");
  } else {
    lymanDiv.style.display = "none";
  }
};
</script>
</div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script><script>
function exportSpectrumAsImage() {
  const container = document.getElementById('spectrumExportZone');
  if (!container) {
    alert("×œ× × ××¦× ××œ×× ×˜ ×œ×™×™×¦×•×.");
    return;
  }
  html2canvas(container).then(canvas => {
    const link = document.createElement('a');
    link.download = 'spectrum_export.png';
    link.href = canvas.toDataURL();
    link.click();
  });
}
</script></body>
</html>
